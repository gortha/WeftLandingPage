# Vercel Setup & Configuration

## üéØ Live Demo
- **Production URL**: [https://weft-finance-v2.vercel.app](https://weft-finance-v2.vercel.app)
- **Preview URL**: Auto-generated for each deployment

## üìã Pre-Deployment Checklist

### 1. Environment Variables
No environment variables required for basic deployment.

### 2. Build Configuration
- **Build Command**: `npm run build`
- **Output Directory**: `.next`
- **Install Command**: `npm install`

### 3. Domain Configuration
- **Custom Domain**: Configure in Vercel dashboard
- **SSL**: Automatically enabled
- **Edge Functions**: Supported

## üîß Advanced Configuration

### Performance Settings
```json
{
  "functions": {
    "app/api/health/route.ts": {
      "maxDuration": 10
    }
  },
  "regions": ["iad1", "sfo1", "lhr1"]
}
```

### Security Headers
```json
{
  "headers": [
    {
      "source": "/(.*)",
      "headers": [
        {
          "key": "X-Content-Type-Options",
          "value": "nosniff"
        },
        {
          "key": "X-Frame-Options",
          "value": "DENY"
        },
        {
          "key": "X-XSS-Protection",
          "value": "1; mode=block"
        }
      ]
    }
  ]
}
```

### PWA Configuration
- **Manifest**: `/manifest.json`
- **Icons**: `/icon.svg`, `/apple-touch-icon.svg`
- **Service Worker**: Auto-generated by Next.js

## üöÄ Deployment Steps

### Step 1: Repository Setup
```bash
# Clone or download the project
git clone https://github.com/your-username/weft-lending-page.git
cd weft-lending-page

# Install dependencies
npm install

# Test locally
npm run dev
```

### Step 2: Vercel Project Setup
```bash
# Login to Vercel
vercel login

# Initialize project
vercel

# Deploy to production
vercel --prod
```

### Step 3: Custom Domain (Optional)
1. Go to your Vercel dashboard
2. Select your project
3. Go to "Settings" > "Domains"
4. Add your custom domain
5. Configure DNS records

## üîç Monitoring & Analytics

### Built-in Analytics
- **Vercel Analytics**: Enabled by default
- **Web Vitals**: Core performance metrics
- **Real User Monitoring**: Automatic tracking

### Custom Analytics
```javascript
// Add to layout.tsx for Google Analytics
import { GoogleAnalytics } from '@next/third-parties/google'

export default function RootLayout({
  children,
}: {
  children: React.ReactNode
}) {
  return (
    <html lang="en">
      <body>
        {children}
        <GoogleAnalytics gaId="GA_MEASUREMENT_ID" />
      </body>
    </html>
  )
}
```

## üõ†Ô∏è Troubleshooting

### Common Issues
1. **Build Failures**: Check TypeScript errors
2. **Missing Assets**: Verify public folder structure
3. **Performance Issues**: Optimize images and animations
4. **SEO Issues**: Check metadata and OpenGraph tags

### Debug Commands
```bash
# Check build locally
npm run build

# Analyze bundle size
npm run analyze

# Check for errors
npm run lint

# Type checking
npm run type-check
```

## ÔøΩ GitHub Actions CI/CD Setup

### Required Repository Secrets
To enable automatic deployments via GitHub Actions, you need to configure these secrets in your repository:

1. **Go to GitHub Repository Settings**
   - Navigate to: `Settings` ‚Üí `Secrets and variables` ‚Üí `Actions`
   - Click `New repository secret`

2. **Add Required Secrets**
   ```
   VERCEL_TOKEN=your_vercel_token_here
   VERCEL_ORG_ID=your_org_id_here
   VERCEL_PROJECT_ID=your_project_id_here
   ```

### Getting Your Vercel Token
1. Go to [Vercel Dashboard](https://vercel.com/account/tokens)
2. Click "Create Token"
3. Name it "GitHub Actions" 
4. Copy the token value
5. Add it as `VERCEL_TOKEN` in GitHub secrets

### Getting Organization & Project IDs
```bash
# Install Vercel CLI
npm install -g vercel

# Login to Vercel
vercel login

# Link your project (run in project root)
vercel link

# This will create .vercel/project.json with your IDs
cat .vercel/project.json
```

The `.vercel/project.json` file contains:
```json
{
  "orgId": "your_org_id_here",
  "projectId": "your_project_id_here"
}
```

### Workflow Status
- **Production**: Deploys on push to `main` branch
- **Preview**: Deploys on push to other branches
- **Status**: Check in GitHub Actions tab

### Troubleshooting CI/CD
```bash
# If deployment fails, check:
# 1. All secrets are set correctly
# 2. Vercel project is linked
# 3. Build passes locally
npm run build

# Check Vercel CLI authentication
vercel whoami

# Run diagnostic script
./diagnose-vercel.sh        # Linux/Mac
./diagnose-vercel.ps1       # Windows
```

**Common Error: "No existing credentials found"**
This error occurs when `VERCEL_TOKEN` is not set or invalid:
1. Go to [Vercel Account Tokens](https://vercel.com/account/tokens)
2. Create a new token named "GitHub Actions"
3. Copy the token value
4. Add it to GitHub secrets as `VERCEL_TOKEN`

**Quick Fix Commands:**
```bash
# Set GitHub secrets using GitHub CLI
gh secret set VERCEL_TOKEN
gh secret set VERCEL_PROJECT_ID --body "your_project_id"
gh secret set VERCEL_ORG_ID --body "your_org_id"

# Or use the setup script
./setup-github-secrets.sh   # Linux/Mac
./setup-github-secrets.ps1  # Windows
```

## ÔøΩüìä Performance Optimization

### Image Optimization
- **Next.js Image**: Automatic optimization
- **WebP/AVIF**: Modern format support
- **Lazy Loading**: Enabled by default

### Code Splitting
- **Dynamic Imports**: Component-level splitting
- **Route-based**: Automatic page splitting
- **Bundle Analysis**: Use `@next/bundle-analyzer`

### Caching Strategy
- **Static Assets**: Long-term caching
- **API Routes**: Custom cache headers
- **Edge Caching**: Vercel Edge Network

## üîê Security Best Practices

### Content Security Policy
```javascript
// next.config.ts
const securityHeaders = [
  {
    key: 'Content-Security-Policy',
    value: "default-src 'self'; script-src 'self' 'unsafe-eval'; style-src 'self' 'unsafe-inline';"
  }
]
```

### HTTPS Enforcement
- **Automatic**: Vercel handles SSL/TLS
- **HSTS**: Strict Transport Security enabled
- **Mixed Content**: Prevented by default

## üìà Scaling Considerations

### Function Limits
- **Serverless Functions**: 10s execution time
- **Edge Functions**: Sub-100ms response
- **Bandwidth**: Unlimited

### Database Integration
- **Vercel Postgres**: Serverless SQL
- **Redis**: Vercel KV storage
- **External**: Any database provider

## üé® Web3 Features

### Blockchain Integration
- **Radix Network**: Ready for DLT integration
- **Wallet Connect**: Web3 wallet support
- **Smart Contracts**: Deployment ready

### Crypto UI Components
- **Animated Backgrounds**: Canvas-based particle systems
- **Holographic Effects**: CSS-only animations
- **Responsive Design**: Mobile-first crypto UI

## üìû Support

### Resources
- **Vercel Docs**: [vercel.com/docs](https://vercel.com/docs)
- **Next.js Docs**: [nextjs.org/docs](https://nextjs.org/docs)
- **Weft Finance**: [docs.v2.weft.finance](https://docs.v2.weft.finance)

### Community
- **Discord**: Vercel Community
- **GitHub**: Issues and discussions
- **Twitter**: @vercel for updates
